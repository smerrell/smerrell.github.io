<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Sam Merrell</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Sam&apos;s personal blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Sam Merrell">
<meta property="og:url" content="http://smerrell.github.io/page/2/index.html">
<meta property="og:site_name" content="Sam Merrell">
<meta property="og:description" content="Sam&apos;s personal blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sam Merrell">
<meta name="twitter:description" content="Sam&apos;s personal blog">
<meta name="twitter:creator" content="@smerrell">
  
    <link rel="alternative" href="/atom.xml" title="Sam Merrell" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-35739428-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Sam Merrell</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        <a id="nav-twitter-link" class="nav-icon" href="https://twitter.com/smerrell" title="Twitter"></a>
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://smerrell.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-shell-scripting-and-git-fun" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2012/10/26/shell-scripting-and-git-fun/" class="article-date">
  <time datetime="2012-10-26T22:48:00.000Z" itemprop="datePublished">2012-10-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/10/26/shell-scripting-and-git-fun/">Shell Scripting and Git Fun</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This afternoon I got the urge to whip up a quick script to help me when using
git and a GitHub hosted repository. Quite often I want to look at the GitHub
page of a project I’m working on when I’m sitting on the command line in the
repository. So I figured, how could I go about making it easier to open that URL
without having to find the link in Chrome or on GitHub’s site. Shell scriping to
the rescue!</p>
<p>I realized with a little bit of text manipulation, I could get the <code>git remote
show</code> command to help me out. So I took the output</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git remote show origin</span><br><span class="line">* remote origin</span><br><span class="line">  Fetch URL: git@github.com:smerrell/dotfiles.git</span><br><span class="line">  Push  URL: git@github.com:smerrell/dotfiles.git</span><br><span class="line">  HEAD branch: master</span><br><span class="line">  Remote branches:</span><br><span class="line">    gh-pages tracked</span><br><span class="line">    master   tracked</span><br><span class="line">  Local branch configured <span class="keyword">for</span> <span class="string">'git pull'</span>:</span><br><span class="line">    master merges with remote master</span><br><span class="line">  Local ref configured <span class="keyword">for</span> <span class="string">'git push'</span>:</span><br></pre></td></tr></table></figure>
<p>And grepped it on Fetch URL leaving me with <code>Fetch URL:
git@github.com:smerrell/dotfiles.git</code>. From there I cut the first 14 characters
using <code>cut -c 14-</code> leaving me with just the git url I was looking for. With just
the URL left, I got working on crafting a Sed command to manipulate the URL to
what I needed, coming up with this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -r <span class="operator">-e</span> <span class="string">'s/\w+@/http:\/\//'</span> <span class="operator">-e</span> <span class="string">'s/\.git$//'</span></span><br><span class="line"><span class="operator">-e</span> <span class="string">'s/\.com:/.com\//'</span> <span class="operator">-e</span><span class="string">'s/git:/http:/'</span></span><br></pre></td></tr></table></figure>
<p>This command just replaces the <em>git@</em> part with <em>http</em> instead, I then stripped
off the <em>.git</em> and <em>.com:</em> with <em>.com/</em>. producing the desired
<code>http://github.com/smerrell/dotfiles</code>. Awesome!</p>
<p>Once I had the URL I wanted, it became pretty simple to open up the url using my
default browser. I simply call <code>start</code> and gave it the url.</p>
<p><strong>OSX Support</strong></p>
<p>After getting this all working on my Windows box at work, I had to see if this
would work on OS X. Being confident in my skills I just copied the file over to
my Mac, dropped it in the bin and happily tried to run it… Until it blew up on
me.</p>
<p>First, I had to remember that on Windows you use <code>start</code> but on OS X you need to
use <code>open</code>. That was easy enough though, I just added a quick check to see if
I’m on OS X or Windows and set a variable <code>opencmd</code> to the right thing. But then
the painful part hit me.</p>
<p>This is when I learned the painful difference between Gnu-based tools and BSD
tools. Sed was very unhappy with the parameters I was trying to pass into it.
Specifically the -r parameter. The script above uses extended regex to get the
special characters of <code>\w</code> and <code>+</code>. Unfortunately BSD Sed uses the <code>-E</code> flag while Gnu
Sed uses the <code>-r</code> flag.</p>
<p>Fortunately this is pretty easy to work around as I store the extendedRegex flag
in my script and set it depending on the OS I’m on.</p>
<p>The most annoying difference between Gnu Sed and BSD sed though, is the support
of Regular Expression Metacharacters. In BSD sed, you do not get the
metacharacters, so <code>\w</code> must become <code>[[:space:]]</code>. So now I know a painful
difference between Gnu Sed regex extensions and BSD regex extensions. After I
replaced the metacharacters I was using with their full version, I ran the
script again and it worked! So I now have an easy way to open a GitHub repo from
the command line.</p>
<p>I still have many imrovements I could make to this script, but I’m pretty happy
with how it turned out after putting about a half hour of work into it. Below is
the file in its entirety and you can find it on
<a href="https://github.com/smerrell/dotfiles/blob/master/bin/view-remote" target="_blank" rel="external">GitHub</a> as
well. Feel free to borrow the script and use it if you find it useful. I’d love
to get some feedback on ways to improve what I have so far.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://smerrell.github.io/2012/10/26/shell-scripting-and-git-fun/" data-id="cikgbmrvb001jnq1yxwjbw2sm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bash/">bash</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell-scripting/">shell-scripting</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-chocolatey-machine-setup" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2012/10/19/chocolatey-machine-setup/" class="article-date">
  <time datetime="2012-10-20T04:42:00.000Z" itemprop="datePublished">2012-10-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/10/19/chocolatey-machine-setup/">Chocolatey machine setup</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>How well automated is your machine setup process? After watching Zach Holman’s
excellent video <a href="http://zachholman.com/talk/unsucking-your-teams-development-environment" target="_blank" rel="external">Unsucking Your Teams Development Environment</a>
I got to thinking about the setup process we have at Extend Health (who is
hiring, come work with us!). While we’ve always talked about smoothing out the process of setting
up a new machine, we’ve never actually gotten around to it. That is, until now.</p>
<p>For GitHub, they use what they call <a href="https://speakerdeck.com/u/wfarr/p/the-setup-managing-an-army-of-laptops-with-puppet" target="_blank" rel="external">The Setup</a>
which is a Ruby script that uses Puppet to manage all their machines. When I had
first looked at Puppet a couple years ago, Windows support was not an option. It
appears that this has changed. While we investigate using Puppet, my friend Kyle
and I have begun setting up a system that uses <a href="http://chocolatey.org" target="_blank" rel="external">Chocolatey</a> and
straight PowerShell to set up our Windows boxes.</p>
<p>So what exactly is Chocolatey? Chocolatey is a package manager designed for
Windows and is modeled somewhat like apt-get for Linux. Essentially it uses the
NuGet infrastructure to deliver software such as Vim or Skype. This makes
Chocolatey an attractive option because like NuGet, you can host your own feed
of software that can be installed on your machine.</p>
<p>Once we decided we’d go with Chocolatey we needed to set up a test base. So we
got ourselves set up with a vanilla Windows 7 VM. This works great since we can
play around with setting up a brand new Windows install and then restore when we
want to try it again. This also helped expose one of our first problems in
setting up a new machine. Chocolatey requires .NET 4.0 to be installed before it
will work.</p>
<p>While I’m admittedly not the biggest fan of PowerShell, when it comes to
scripting Windows to do what you want, it can definitely come in handy. <a href="http://kyzog.wordpress.com/" target="_blank" rel="external">Kyle</a>
came across a very handy PowerShell module called <a href="http://gallery.technet.microsoft.com/scriptcenter/2d191bcd-3308-4edd-9de2-88dff796b0bc" target="_blank" rel="external">PSWindowsUpdate</a>.
Once we got that script working and how to continue our script using elevated
permissions we were off. Here’s the line we got directly from the PSWindows
update example.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get-WUInstall -ServiceID <span class="number">9482</span>f4b4-e343-<span class="number">43</span>b6-b170-<span class="number">9</span>a65bc822c77 -Title <span class="string">".NET Framework 4"</span> -AcceptAll</span><br></pre></td></tr></table></figure>
<p>The last thing we were able to do this Friday was get PSWindows update to
install .NET 4.0 and Chocolatey! Exciting news for us because now we should be
able to take a brand new machine and install everything we need to write code at
Work.</p>
<p>So where do we take it from here? We’ve got many plans for our own setup script
but the first step is to make the initial setup from a new machine to getting
the right software installed. We’ve gotten .NET 4.0 out of the way but now we
need to see what other snags we may run into. We also need to see how we can get
Visual Studio 2010 and SQL Server 2012 installed. From there we’d also like to
start making profiles so QA and our DB teams can also plug into what we’re
building.</p>
<p>Longer term, we’d also like to keep investigating what Puppet may be able to
provide and start trying out options there, but for now this is a great step
forward in automating the suck out of our setup process.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://smerrell.github.io/2012/10/19/chocolatey-machine-setup/" data-id="cikgbmrt10000nq1y4679qrnz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/automation/">automation</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dev-setup/">dev-setup</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/02/09/Keeping-up-with-JavaScript/">Keeping up with JavaScript</a>
          </li>
        
          <li>
            <a href="/2016/01/02/Using-qDslrDashboard-with-the-Sony-A6000/">Using qDslrDashboard with the Sony a6000</a>
          </li>
        
          <li>
            <a href="/2015/12/23/learning-rust-as-a-csharp-developer/">Learning Rust as a C# Developer</a>
          </li>
        
          <li>
            <a href="/2012/12/14/agile-is-hard/">Agile is Hard</a>
          </li>
        
          <li>
            <a href="/2012/12/06/make-testing-easy/">Make Testing Easy</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">November 2012</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/10/">October 2012</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OSX/">OSX</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools/">Tools</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/agile/">agile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bash/">bash</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/career/">career</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/csharp/">csharp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dev-setup/">dev-setup</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/editors/">editors</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kanban/">kanban</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opensource/">opensource</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/photography/">photography</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/random/">random</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/retrospective/">retrospective</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rust/">rust</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scrum/">scrum</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell-scripting/">shell-scripting</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/softwaredev/">softwaredev</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sony-a6000/">sony-a6000</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublimetext/">sublimetext</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/testing/">testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thoughts/">thoughts</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/OSX/" style="font-size: 10px;">OSX</a> <a href="/tags/Tools/" style="font-size: 10px;">Tools</a> <a href="/tags/agile/" style="font-size: 10px;">agile</a> <a href="/tags/automation/" style="font-size: 20px;">automation</a> <a href="/tags/bash/" style="font-size: 10px;">bash</a> <a href="/tags/career/" style="font-size: 10px;">career</a> <a href="/tags/csharp/" style="font-size: 10px;">csharp</a> <a href="/tags/dev-setup/" style="font-size: 20px;">dev-setup</a> <a href="/tags/editors/" style="font-size: 10px;">editors</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/kanban/" style="font-size: 10px;">kanban</a> <a href="/tags/opensource/" style="font-size: 10px;">opensource</a> <a href="/tags/photography/" style="font-size: 10px;">photography</a> <a href="/tags/random/" style="font-size: 10px;">random</a> <a href="/tags/retrospective/" style="font-size: 10px;">retrospective</a> <a href="/tags/rust/" style="font-size: 10px;">rust</a> <a href="/tags/scrum/" style="font-size: 10px;">scrum</a> <a href="/tags/shell-scripting/" style="font-size: 10px;">shell-scripting</a> <a href="/tags/softwaredev/" style="font-size: 10px;">softwaredev</a> <a href="/tags/sony-a6000/" style="font-size: 10px;">sony-a6000</a> <a href="/tags/sublimetext/" style="font-size: 10px;">sublimetext</a> <a href="/tags/testing/" style="font-size: 10px;">testing</a> <a href="/tags/thoughts/" style="font-size: 10px;">thoughts</a>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Sam Merrell<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>